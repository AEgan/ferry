#!/usr/bin/env ruby
require 'ferry'

# --help
# if ['--help', '-H', nil].include?(ARGV[0])
#   puts"
#   Choose one of the following commands ...
#   ferry to_csv [your db environment]                             Exports database to csv file in db/ferry_to_csv_[your db environment]
#   ferry to_new_db_type [your db environment] [desired adapter]   Switches specified database env to a new adapter
#   ferry [--help, -H, '']                                         Displays this menu!
#   "
# end

OptionParser.new do |opts|
  opts.on('-h', '--help', nil) {
    puts "selfservice"
  }
end.parse!

exporter = Ferry::Exporter.new
exporter.to_csv(ARGV[1]) if ARGV[0] == 'to_csv'
exporter.to_yaml if ARGV[0] == 'to_yaml'
exporter.to_new_db_type if ARGV[0] == 'to_new_db_type'

importer = Ferry::Importer.new
importer.import(ARGV[1], ARGV[2], ARGV[3]) if ARGV[0] == 'import'
